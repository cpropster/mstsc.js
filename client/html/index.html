<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script type="text/javascript" src="./socket.io/socket.io.js"></script>
	<script type="text/javascript" src="./js/mstsc.js"></script>
	<script type="text/javascript" src="./js/keyboard.js"></script>
	<script type="text/javascript" src="./js/rle.js"></script>
	<script type="text/javascript" src="./js/client.js"></script>
	<script type="text/javascript" src="./js/canvas.js"></script>
</head>
  <body onload='load("myCanvas")'>
        <canvas id="myCanvas" style="display:none">
    <script language="javascript">
    const urlParams = new URLSearchParams(window.location.search);

    var client = null;
    
    function load (canvas) {
    	client = Mstsc.client.create(Mstsc.$(canvas));
        connect(urlParams.get("host"),urlParams.get("domain"),urlParams.get("user"),urlParams.get("pass"));
    } 
    
    function connect (ip, domain, username, password) {
		var canvas = Mstsc.$("myCanvas");
		canvas.style.display = 'inline';
		canvas.width = window.innerWidth;
		canvas.height = window.innerHeight;
		client.connect(ip, domain, username, password, function (err) {
			Mstsc.$("myCanvas").style.display = 'none';
			Mstsc.$("main").style.display = 'inline';
		});
    }

  </script>
 </body>
</html>
